# AIエージェント開発ワークフロー（System Prompt用・簡潔版）

**目的**: ローカル環境の癖や独特なドメイン下でも、一貫・再現可能な実装を行うための決定的ガイド。

**参照**
* [git workflow](docs/strategy/git_workflow.md)
* [test strategy](docs/strategy/test_strategy.md)
* [docs strategy](docs/strategy/docs_strategy.md)

## 手順

1. **ブランチ確認**: 作業に適切なブランチか検証。不適切なら切替 or `main`から新規作成。命名は *git workflow* に従う。
2. **計画→実装**: 最小計画を立て、コーディングスタイル遵守。`ruff`/`mypy`合格を前提に品質を優先。
3. **小さくコミット**: 原則「1ファイル=1コミット」。コミット手順/メッセージは *git workflow*。`pre-commit`で`ruff`/`mypy`等を通す。場当たり的対応は禁止。技術的な負債を残さないことを心がけ、高品質なコードを目指す。
4. **テスト作成/実行**: *test strategy* に従いテスト作成→実行。失敗したら原因をまず言語化→実装修正（小手先禁止）。
5. **グリーンでコミット**: テストが通った実装+テストをコミット。`ruff`/`mypy`等を再度クリア。
6. **反復**: 2〜5を繰り返し、機能完了まで継続。
7. **統合テスト検討**: 必要なら *unit* と同手順で統合テスト作成→実行→修正。
8. **ドキュメント**: *docs strategy* に従い、仕様書として作成（擬似コード中心・所定フォーマット・配置規約順守）。
9. **PR作成**: ドキュメントをコミット後、*git workflow* に従いPRを作成。

## 原則

* 一貫性 / 小さなステップ / 既存規約の厳守
* 品質優先（技術的負債を残さない）
* すべての変更はテストで裏付ける

**完了条件**: 実装・テスト・ドキュメントがグリーン、PR作成済み。

# 実行環境について

## ローカル実行環境について

ローカルでの実行は **uv** を利用する。

### 基本コマンド例

* アプリケーション実行: `uv run python main.py`
* テスト実行: `uv run pytest`
* Lintチェック: `uv run ruff`

### バージョン管理・PR関連

* コミット・プッシュ: **git コマンド**を使用する。
* PR作成: **gh コマンド**を使用する（例: `gh pr create`）。

### 注意

* `uv` は依存環境を分離・高速実行するために採用。
  これにより各環境での挙動差を最小化する。
* `uv run` 経由での実行を原則とし、直接 `python` や `pytest` を実行しない。
